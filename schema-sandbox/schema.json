{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "http://citation-file-format.github.io/1.1.0/schema",
    "title": "Citation File Format",
    "description": "A file with citation metadata for software or datasets",
    "additionalProperties": false,
    "type": "object",
    "properties": {
        "cff-version": {
            "type": "string",
            "pattern": "^1\\.1\\.0$",
            "description": "The version of CFF used for providing the citation metadata"
        },
        "message": {
            "type": "string",
            "description": "A message to the (human) reader of the file to let them know what to do with the citation metadata"
        },
        "type": {
            "type": "string",
            "enum": [
                "dataset",
                "software"
            ]
        },
        "abstract": {
            "type": "string"
        },
        "authors": {
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "anyOf": [
                    {"$ref": "#/definitions/person"},
                    {"$ref": "#/definitions/entity"}
                ]
            }
        },
        "commit": {
            "type": "string",
            "description": "The commit SHA1 hash or revision number of the software version",
            "pattern": "^[a-f0-9]{7,40}$"
        },
        "contact": {
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "anyOf": [
                    {"$ref": "#/definitions/person"},
                    {"$ref": "#/definitions/entity"}
                ]
            }
        },
        "date-released": {
            "$ref": "#/definitions/date"
        },
        "license-url": {
            "$ref": "#/definitions/url"
        },
        "repository": {
            "$ref": "#/definitions/url"
        },
        "repository-code": {
            "$ref": "#/definitions/url"
        },
        "repository-artifact": {
            "$ref": "#/definitions/url"
        },
        "url": {
            "$ref": "#/definitions/url"
        "identifiers": {
            "items": {
                "$ref": "#/definitions/identifier"
            },
            "minItems": 1,
            "type": "array",
            "uniqueItems": true
        }
    },
    "required": [
        "cff-version",
        "message",
        "authors"
    ],
    "definitions": {
        "identifier": {
            "additionalProperties": false,
            "properties": {
                "type": {
                    "enum": [
                        "doi",
                        "other",
                        "swh",
                        "url"
                    ],
                    "type": "string"
                },
                "value": {
                    "minLength": 1,
                    "type": "string"
                }
            },
            "required": [
                "type",
                "value"
            ],
            "type": "object"
        },
        "person": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "given-names": {
                    "type": "string"
                }
            }
        },
        "entity": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "url": {
            "type": "string",
            "format": "uri",
            "pattern": "^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$"
        }
    }
}
